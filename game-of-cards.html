
<!DOCTYPE html>
<html lang='en'>
    <head>
        <title style="color: white">Game of Cards</title>
        <link rel='icon' type='image/x-icon' href='favicon.ico'>
        <style type="text/css">
            body {
                font-family: "Lucida Console", monospace;
                margin: 0;
                height: 100%;
                text-align: center;
                background-image:  url(stars.gif);
                color: white;
            }

            .card {
                margin: 20px;
                background-color: white;
                color: black;
                border-radius: 10px;
                display: inline-block;
                height: 250px;
                width: 170px;
            }
        </style>
    </head>
<body>
    <h1>Game of Cards</h1>
    <br>
    <div id="center"></div>
----
    <br><br>
    Player 1 Cards:
    <div id="player1cards">
        
    </div>

    Player 2 Cards:
    <div id="player2cards">

    </div>
</body>
<script>
    if (location.hostname === "") {
        document.title = "(L) " + document.title
    }
    
    let cards = [
        ["Mirror",                  "ACTION", "Swap all possessed cards with an opponent",
            () => { alert("Hi")}],
        ["The Bernie Sanders",      "ACTION", "Player with most points gives 5 points to player with least",
            () => { alert("Hi")}],
        ["Fake ID",                 "ACTION", "After this turn, play your opponent's turn for them",
            () => { alert("Hi")}],
        ["Money Boy",               "ACTION", "+1 point per possessed card",
            () => { alert("Hi")}],
        ["Dumpster Dive",           "ACTION", "Take or play any card from the discard",
            () => { alert("Hi")}],
        ["Lottery",                 "ACTION", "Take or play a random card from the deck",
            () => { alert("Hi")}],
        ["Shuffle",                 "ACTION", "Shuffle all possessed cards and evenly re-distribute them",
            () => { alert("Hi")}],
        ["Even Steven",             "ACTION", "If you've an even # of points, +2 pts",
            () => { alert("Hi")}],
        ["Treasure",                "ACTION", "+5 pts",
            () => { alert("Hi")}],
        ["Tradesies",               "ACTION", "Trade a possessed card with an opponent",
            () => { alert("Hi")}],
        ["Discard Datcard",         "ACTION", "Discard a possessed card (yours or opponent's)",
            () => { alert("Hi")}],
        ["Thief",                   "ACTION", "Steal 2 points from an opponent",
            () => { alert("Hi")}],
        ["Options",                 "ACTION", "Add 3 more cards to center, then take another turn.",
            () => { alert("Hi")}],


        ["Big Investment",          "EFFECT", "-2 points when gained. If possessed for 4 turns, +5 points and discard",
            () => { alert("Hi")}],
        ["Point Farm",              "EFFECT", "While possessed, +1 point (at end of turn)"],
        ["Insider Trading",         "EFFECT", "While possessed, you can play the top card in the deck"],
        ["Double Trouble",          "EFFECT", "While possessed, all point values on cards are doubled during your turn"],
        ["Storage",                 "EFFECT", "While possessed, you can store red cards and play at later time"],
        ["No Limits",               "EFFECT", "While possessed, there is no limit on your # of possessed card"],    
    ]

    let numPlayers = 2
    let center = []
    let discard = []
    let playerCards = [[], []]
    let playerPoints = []
    let playerNames = ["Ben", "Jules"]

    for (let i = 0; i < numPlayers; i++) {
        playerPoints[i] = 0
    }
    
    let deck = [...Array(cards.length).keys()];
    shuffle(deck)

    for (let i = 0 ; i < 3; i++) {
        center.push(deck.pop())
    }

    let currentTurn = 0
    function startGame() {
        console.log(playerName[currentTurn] ="'s turn: choose a card")
        // Choose a c a
    }

    function functionWrapper(fn) {
        fn()
    }

    function shuffle(array) {
        for (var i = array.length - 1; i > 0; i--) {
            var j = Math.floor(Math.random() * (i + 1));
            var temp = array[i];
            array[i] = array[j];
            array[j] = temp;
        }
    }

    function cardClicked(cardNumber, player) {
        let card = cards[cardNumber]
        if (player != -1) {
            return
        }
        if (card[1] == "ACTION") {
            
        } else {
            center.splice(center.indexOf(cardNumber), 1)
            playerCards[player].push(cardNumber)

        }
        renderState()
        console.log(card)
    }

    renderState()
    function renderState() {
        for (let i = 0; i < center.length; i++) {
            renderCard(center[i], -1)
        }
        for (let player = 0; player < numPlayers; player++) {
            for (let i = 0; i < playerCards[1].length; i++) {
                renderCard(playerCards[1], 1)
            }
        }
    }

    function renderCard(num, player) {
        var div
        if (player == -1) {
            div = "center"
        } else {
            div = "player" + (num + 1) + "cards"
        }
        let newCard = document.createElement("div")
        newCard.setAttribute("class", "card")
        newCard.innerHTML = "<b>" + cards[num][0] + "</b><br><br>" + cards[num][2]
        newCard.onclick = () => cardClicked(num, player)
        
        document.getElementById(div).appendChild(newCard)
    }
    
</script>